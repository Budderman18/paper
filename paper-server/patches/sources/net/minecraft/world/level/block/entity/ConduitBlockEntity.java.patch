--- a/net/minecraft/world/level/block/entity/ConduitBlockEntity.java
+++ b/net/minecraft/world/level/block/entity/ConduitBlockEntity.java
@@ -165,8 +_,20 @@
     }
 
     private static void applyEffects(Level level, BlockPos pos, List<BlockPos> positions) {
+        // CraftBukkit start
+        ConduitBlockEntity.applyEffects(level, pos, ConduitBlockEntity.getRange(positions));
+    }
+
+    public static int getRange(List<BlockPos> positions) {
+        // CraftBukkit end
         int size = positions.size();
         int i = size / 7 * 16;
+        // CraftBukkit start
+        return i;
+    }
+
+    private static void applyEffects(Level level, BlockPos pos, int i) { // i = effect range in blocks
+        // CraftBukkit end
         int x = pos.getX();
         int y = pos.getY();
         int z = pos.getZ();
@@ -175,7 +_,7 @@
         if (!entitiesOfClass.isEmpty()) {
             for (Player player : entitiesOfClass) {
                 if (pos.closerThan(player.blockPosition(), i) && player.isInWaterOrRain()) {
-                    player.addEffect(new MobEffectInstance(MobEffects.CONDUIT_POWER, 260, 0, true, true));
+                    player.addEffect(new MobEffectInstance(MobEffects.CONDUIT_POWER, 260, 0, true, true), org.bukkit.event.entity.EntityPotionEffectEvent.Cause.CONDUIT); // CraftBukkit
                 }
             }
         }
@@ -184,13 +_,21 @@
     private static void updateAndAttackTarget(
         ServerLevel serverLevel, BlockPos blockPos, BlockState blockState, ConduitBlockEntity conduitBlockEntity, boolean flag
     ) {
+    // CraftBukkit start - add "damageTarget" boolean
+        ConduitBlockEntity.updateAndAttackTarget(serverLevel, blockPos, blockState, conduitBlockEntity, flag, true);
+    }
+
+    private static void updateAndAttackTarget(
+        ServerLevel serverLevel, BlockPos blockPos, BlockState blockState, ConduitBlockEntity conduitBlockEntity, boolean flag, boolean damageTarget
+    ) {
+    // CraftBukkit end - add "damageTarget" boolean
         EntityReference<LivingEntity> entityReference = updateDestroyTarget(conduitBlockEntity.destroyTarget, serverLevel, blockPos, flag);
         LivingEntity livingEntity = EntityReference.get(entityReference, serverLevel, LivingEntity.class);
-        if (livingEntity != null) {
+        if (damageTarget && livingEntity != null) { // CraftBukkit
+            if (livingEntity.hurtServer(serverLevel, serverLevel.damageSources().magic(), 4.0F)) // CraftBukkit
             serverLevel.playSound(
                 null, livingEntity.getX(), livingEntity.getY(), livingEntity.getZ(), SoundEvents.CONDUIT_ATTACK_TARGET, SoundSource.BLOCKS, 1.0F, 1.0F
             );
-            livingEntity.hurtServer(serverLevel, serverLevel.damageSources().magic(), 4.0F);
         }
 
         if (!Objects.equals(entityReference, conduitBlockEntity.destroyTarget)) {
